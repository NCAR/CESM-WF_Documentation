
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>How to create a Cylc CESM workflow from scratch &#8212; CESM_WF_DOC 1.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Common questions and answers" href="faq.html" />
    <link rel="prev" title="How to modify a CESM Cylc workflow if you need to make changes" href="mods.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="faq.html" title="Common questions and answers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="mods.html" title="How to modify a CESM Cylc workflow if you need to make changes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CESM_WF_DOC 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-create-a-cylc-cesm-workflow-from-scratch">
<span id="from-scratch"></span><h1>How to create a Cylc CESM workflow from scratch<a class="headerlink" href="#how-to-create-a-cylc-cesm-workflow-from-scratch" title="Permalink to this headline">¶</a></h1>
<p>This section is helpful if you would like to learn how to create your own workflows from scratch or you would like to learn more about how Cylc works.</p>
<p>In summary, if you can run something on the command line or through the queue, Cylc can run it for you.  All you need to do is tell Cylc what you want to run, when it should run, and how to run it.</p>
<p>Most users create a head directory to store all of their Cylc “suites”.  Suites is the term to use to describe one workflow to run.  The convention that has been adopted at NCAR involves creating a top level cylc suite directory off of your home directory.  Then for every “suite” or workflow you create, users create a separate directory off of their main cylc suite directory.  Typically, the CESM casename has been used for this directory name, but it can be whatever makes sense to you.  Within that directory, you will create a file named “suite.rc” (this exact name is expected).  This file is what tells Cylc all about your workflow.</p>
<p>Below is a copy of a suite.rc file that is similar to what is ran for CMIP6 production, except it has been shortened for simplicity.  These files tell Cylc all about the tasks you want to run.  These files are autogenerated by the CESM Workflow script so users typically don’t have to worry about their contents.  If you want, you can copy this example and use it as a starting point for creating your own Cylc script.</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="c1">#!Jinja2</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_atm_averages</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0005-01-01&#39;</span>,<span class="s1">&#39;0010-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_atm_diagnostics</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0005-01-01&#39;</span>,<span class="s1">&#39;0010-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_case_run</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0003-01-01&#39;</span>, <span class="s1">&#39;0007-01-01&#39;</span>, <span class="s1">&#39;0011-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_case_st_archive</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0003-01-01&#39;</span>, <span class="s1">&#39;0007-01-01&#39;</span>, <span class="s1">&#39;0011-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_ice_averages</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0005-01-01&#39;</span>,<span class="s1">&#39;0010-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_ice_diagnostics</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0005-01-01&#39;</span>,<span class="s1">&#39;0010-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_lnd_averages</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0005-01-01&#39;</span>,<span class="s1">&#39;0010-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_lnd_diagnostics</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0005-01-01&#39;</span>,<span class="s1">&#39;0010-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_ocn_averages</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0005-01-01&#39;</span>,<span class="s1">&#39;0010-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_ocn_diagnostics</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0005-01-01&#39;</span>,<span class="s1">&#39;0010-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_timeseriesL</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0011-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">dates_xconform</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;0011-01-01&#39;</span><span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">ATMDIAG_test_first_yr</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span>,5<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">ATMDIAG_test_nyrs</span> <span class="o">=</span> <span class="o">[</span><span class="m">5</span>,5<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">OCNDIAG_YEAR0</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span>,1<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">OCNDIAG_YEAR1</span> <span class="o">=</span> <span class="o">[</span><span class="m">5</span>,10<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">OCNDIAG_TSERIES_YEAR0</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span>,1<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">OCNDIAG_TSERIES_YEAR1</span> <span class="o">=</span> <span class="o">[</span><span class="m">5</span>,10<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">LNDDIAG_clim_first_yr_1</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span>,5<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">LNDDIAG_trends_first_yr_1</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span>,5<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">LNDDIAG_clim_num_yrs_1</span> <span class="o">=</span> <span class="o">[</span><span class="m">5</span>,5<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">LNDDIAG_trends_num_yrs_1</span> <span class="o">=</span> <span class="o">[</span><span class="m">5</span>,5<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">ICEDIAG_BEGYR_DIFF</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span>,1<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">ICEDIAG_ENDYR_DIFF</span> <span class="o">=</span> <span class="o">[</span><span class="m">5</span>,10<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">ICEDIAG_BEGYR_CONT</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span>,1<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">ICEDIAG_ENDYR_CONT</span> <span class="o">=</span> <span class="o">[</span><span class="m">5</span>,10<span class="o">]</span> %<span class="o">}</span>
 <span class="o">{</span>% <span class="nb">set</span> <span class="nv">ICEDIAG_YRS_TO_AVG</span> <span class="o">=</span> <span class="o">[</span><span class="m">5</span>,10<span class="o">]</span> %<span class="o">}</span>
 <span class="nv">title</span> <span class="o">=</span> helloworld
 <span class="o">[</span>cylc<span class="o">]</span>
     <span class="o">[[</span>environment<span class="o">]]</span>
         <span class="nv">MAIL_ADDRESS</span><span class="o">=</span>johnsmith@ucar.edu,janesmith@ucar.edu
     <span class="o">[[</span>event hooks<span class="o">]]</span>
         shutdown <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
 <span class="o">[</span>scheduling<span class="o">]</span>
     <span class="o">[[</span>dependencies<span class="o">]]</span>
         <span class="nv">graph</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">                 case_run_0003-01-01 =&gt; case_st_archive_0003-01-01</span>
<span class="s2">                 case_st_archive_0003-01-01 =&gt; case_run_0005-01-01</span>
<span class="s2">                 case_run_0005-01-01 =&gt; case_st_archive_0005-01-01</span>
<span class="s2">                 case_st_archive_0005-01-01 =&gt; atm_averages_0005-01-01 &amp; ocn_averages_0005-01-01 &amp; lnd_averages_0005-01-01 &amp; ice_averages_0005-01-01 &amp; case_run_0007-01-01</span>
<span class="s2">                 atm_averages_0005-01-01 =&gt; atm_diagnostics_0005-01-01 =&gt; atm_diagnostics_0005-01-01_post</span>
<span class="s2">                 ocn_averages_0005-01-01 =&gt; ocn_diagnostics_0005-01-01 =&gt; ocn_diagnostics_0005-01-01_post</span>
<span class="s2">                 lnd_averages_0005-01-01 =&gt; lnd_diagnostics_0005-01-01 =&gt; lnd_diagnostics_0005-01-01_post</span>
<span class="s2">                 ice_averages_0005-01-01 =&gt; ice_diagnostics_0005-01-01 =&gt; ice_diagnostics_0005-01-01_post</span>
<span class="s2">                 case_run_0007-01-01 =&gt; case_st_archive_0007-01-01</span>
<span class="s2">                 case_st_archive_0007-01-01 =&gt; case_run_0009-01-01</span>
<span class="s2">                 case_run_0009-01-01 =&gt; case_st_archive_0009-01-01</span>
<span class="s2">                 case_st_archive_0009-01-01 =&gt; case_run_0011-01-01</span>
<span class="s2">                 case_run_0011-01-01 =&gt; case_st_archive_0011-01-01</span>
<span class="s2">                 case_st_archive_0011-01-01 =&gt; atm_averages_0010-01-01 &amp; ocn_averages_0010-01-01 &amp; lnd_averages_0010-01-01 &amp; ice_averages_0010-01-01 &amp; timeseriesL_0011-01-01</span>
<span class="s2">                 atm_averages_0010-01-01 =&gt; atm_diagnostics_0010-01-01 =&gt; atm_diagnostics_0010-01-01_post</span>
<span class="s2">                 ocn_averages_0010-01-01 =&gt; ocn_diagnostics_0010-01-01 =&gt; ocn_diagnostics_0010-01-01_post</span>
<span class="s2">                 lnd_averages_0010-01-01 =&gt; lnd_diagnostics_0010-01-01 =&gt; lnd_diagnostics_0010-01-01_post</span>
<span class="s2">                 ice_averages_0010-01-01 =&gt; ice_diagnostics_0010-01-01 =&gt; ice_diagnostics_0010-01-01_post</span>
<span class="s2">                 timeseriesL_0011-01-01 =&gt; xconform_0011-01-01</span>
<span class="s2">                &quot;&quot;&quot;</span>

 <span class="o">[</span>runtime<span class="o">]</span>
     <span class="o">[[</span>root<span class="o">]]</span>
         <span class="o">[[[</span>environment<span class="o">]]]</span>
         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_atm_averages<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>atm_averages_<span class="o">{{</span>dates_atm_averages<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/<span class="p">;</span> ./pp_config --set <span class="nv">ATMDIAG_test_first_yr</span><span class="o">={{</span>ATMDIAG_test_first_yr<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">ATMDIAG_test_nyrs</span><span class="o">={{</span>ATMDIAG_test_nyrs<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span>  /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/atm_averages
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> averages
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">4</span>:ncpus<span class="o">=</span><span class="m">18</span>:mpiprocs<span class="o">=</span><span class="m">18</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_atm_diagnostics<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>atm_diagnostics_<span class="o">{{</span>dates_atm_diagnostics<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/atm_diagnostics
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> diagnostics
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">1</span>:ncpus<span class="o">=</span><span class="m">18</span>:mpiprocs<span class="o">=</span><span class="m">18</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_atm_diagnostics<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>atm_diagnostics_<span class="o">{{</span>dates_atm_diagnostics<span class="o">[</span>i<span class="o">]}}</span>_post <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/copy_html
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_case_run<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>case_run_<span class="o">{{</span>dates_case_run<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/case.run.cylc
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
                 execution retry <span class="nv">delays</span> <span class="o">=</span> PT30S, PT120S, PT600S
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -A <span class="o">=</span> ACCT00099
                 -q <span class="o">=</span> regular
                 -N <span class="o">=</span> helloworld.run
                 -r <span class="o">=</span> n
                 -j <span class="o">=</span> oe
                 -S <span class="o">=</span> /bin/bash
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">141</span>:ncpus<span class="o">=</span><span class="m">36</span>:mpiprocs<span class="o">=</span><span class="m">12</span>:ompthreads<span class="o">=</span><span class="m">3</span>
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_case_st_archive<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>case_st_archive_<span class="o">{{</span>dates_case_st_archive<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/case.st_archive.cylc
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT1H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -A <span class="o">=</span> ACCT00099
                 -q <span class="o">=</span> regular
                 -N <span class="o">=</span> helloworld.st_archive
                 -r <span class="o">=</span> n
                 -j <span class="o">=</span> oe
                 -S <span class="o">=</span> /bin/bash
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">1</span>:mpiprocs<span class="o">=</span><span class="m">1</span>:ompthreads<span class="o">=</span><span class="m">1</span>
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_ice_averages<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>ice_averages_<span class="o">{{</span>dates_ice_averages<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/<span class="p">;</span> ./pp_config --set <span class="nv">ICEDIAG_BEGYR_DIFF</span><span class="o">={{</span>ICEDIAG_BEGYR_DIFF<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">ICEDIAG_ENDYR_DIFF</span><span class="o">={{</span>ICEDIAG_ENDYR_DIFF<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">ICEDIAG_BEGYR_CONT</span><span class="o">={{</span>ICEDIAG_BEGYR_CONT<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">ICEDIAG_ENDYR_CONT</span><span class="o">={{</span>ICEDIAG_ENDYR_CONT<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">ICEDIAG_YRS_TO_AVG</span><span class="o">={{</span>ICEDIAG_YRS_TO_AVG<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span>  /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/ice_averages
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> averages
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">4</span>:ncpus<span class="o">=</span><span class="m">4</span>:mpiprocs<span class="o">=</span><span class="m">4</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_ice_diagnostics<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>ice_diagnostics_<span class="o">{{</span>dates_ice_diagnostics<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/ice_diagnostics
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> diagnostics
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">1</span>:ncpus<span class="o">=</span><span class="m">8</span>:mpiprocs<span class="o">=</span><span class="m">8</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_ice_diagnostics<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>ice_diagnostics_<span class="o">{{</span>dates_ice_diagnostics<span class="o">[</span>i<span class="o">]}}</span>_post <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/copy_html
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_lnd_averages<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>lnd_averages_<span class="o">{{</span>dates_lnd_averages<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/<span class="p">;</span> ./pp_config --set <span class="nv">LNDDIAG_clim_first_yr_1</span><span class="o">={{</span>LNDDIAG_clim_first_yr_1<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">LNDDIAG_trends_first_yr_1</span><span class="o">={{</span>LNDDIAG_trends_first_yr_1<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">LNDDIAG_clim_num_yrs_1</span><span class="o">={{</span>LNDDIAG_clim_num_yrs_1<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">LNDDIAG_trends_num_yrs_1</span><span class="o">={{</span>LNDDIAG_trends_num_yrs_1<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span>  /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/lnd_averages
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> averages
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">4</span>:ncpus<span class="o">=</span><span class="m">18</span>:mpiprocs<span class="o">=</span><span class="m">18</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_lnd_diagnostics<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>lnd_diagnostics_<span class="o">{{</span>dates_lnd_diagnostics<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/lnd_diagnostics
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> diagnostics
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">1</span>:ncpus<span class="o">=</span><span class="m">16</span>:mpiprocs<span class="o">=</span><span class="m">16</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_lnd_diagnostics<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>lnd_diagnostics_<span class="o">{{</span>dates_lnd_diagnostics<span class="o">[</span>i<span class="o">]}}</span>_post <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/copy_html
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_ocn_averages<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>ocn_averages_<span class="o">{{</span>dates_ocn_averages<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/<span class="p">;</span> ./pp_config --set <span class="nv">OCNDIAG_YEAR0</span><span class="o">={{</span>OCNDIAG_YEAR0<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">OCNDIAG_YEAR1</span><span class="o">={{</span>OCNDIAG_YEAR1<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">OCNDIAG_TSERIES_YEAR0</span><span class="o">={{</span>OCNDIAG_TSERIES_YEAR0<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span> ./pp_config --set <span class="nv">OCNDIAG_TSERIES_YEAR1</span><span class="o">={{</span>OCNDIAG_TSERIES_YEAR1<span class="o">[</span>i<span class="o">]}}</span><span class="p">;</span>  /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/ocn_averages
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> averages
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">4</span>:ncpus<span class="o">=</span><span class="m">4</span>:mpiprocs<span class="o">=</span><span class="m">4</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_ocn_diagnostics<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>ocn_diagnostics_<span class="o">{{</span>dates_ocn_diagnostics<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/ocn_diagnostics
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> diagnostics
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">1</span>:ncpus<span class="o">=</span><span class="m">16</span>:mpiprocs<span class="o">=</span><span class="m">16</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_ocn_diagnostics<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>ocn_diagnostics_<span class="o">{{</span>dates_ocn_diagnostics<span class="o">[</span>i<span class="o">]}}</span>_post <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/copy_html
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_timeseriesL<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>timeseriesL_<span class="o">{{</span>dates_timeseriesL<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/timeseriesL
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> timeseries
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">16</span>:ncpus<span class="o">=</span><span class="m">9</span>:mpiprocs<span class="o">=</span><span class="m">9</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>

         <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_xconform<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
         <span class="o">[[</span>xconform_<span class="o">{{</span>dates_xconform<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
         <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/xconform
         <span class="o">[[[</span>job<span class="o">]]]</span>
                 <span class="nv">method</span> <span class="o">=</span> pbs
                 execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
         <span class="o">[[[</span>directives<span class="o">]]]</span>
                 -N <span class="o">=</span> xconform
                 -q <span class="o">=</span> regular
                 -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">16</span>:ncpus<span class="o">=</span><span class="m">4</span>:mpiprocs<span class="o">=</span><span class="m">4</span>
                 -A <span class="o">=</span> ACCT00099
         <span class="o">[[[</span>event hooks<span class="o">]]]</span>
                 started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
                 failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
         <span class="o">{</span>% endfor %<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Once this file is setup, you will need to register your suite.rc file.  Once registered, you can run any Cylc command anywhere on the file system and the command knows where your suite is and what it contains.  To register your suite.rc file, you need to execute this command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>cylc register &lt;whatever I want to name my suite&gt;.suite /the/path/to/the/suite.rc/file/
</pre></div>
</div>
<p>You can name the suite whatever you would like.  For easier recognition, the standard has been &lt;casename&gt;.suite. For easier recognition, the standard has been &lt;casename&gt;.suite. Whatever you name it, you will have to remember this name because you will use this name within every cylc and gcylc call. If you forget, you can see a list of all of your registered suites in your ~/cylc-run/ directory. This directory is created by Cylc automatically and contains all of the run time information, including the suite’s database that contains all of the status information.</p>
<p>Here are some other useful commands while creating a new Cylc suite or modifying an existing one:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>cylc graph &lt;whatever you named your suite&gt;.suite  <span class="c1"># This creates a graphical representation of your workflow.  It&#39;s helpful to see if you&#39;ve connected the dependencies correctly.</span>

cylc validate &lt;whatever you named your suite&gt;.suite <span class="c1"># This checks for incorrect syntax</span>
</pre></div>
</div>
<p><strong>Line-by-line description of the above suite.rc file</strong></p>
<p><strong>Line 1:</strong>  This file uses Jinja2 templating in order to make this file easier to read and to make it more compact</p>
<p><strong>Lines 2-13:</strong>  These arrays are part of the Jinja2 templating that list the dates to run each task for.  The variables dates_*_averages must have the same number of entries as dates_*_diagnostics for the same component type.  For example, if dates_atm_averages has two entries, dates_atm_diagnostics must also have two entries.</p>
<p><strong>Lines 14-28:</strong>  These arrays are also part of the Jinja templating.  They list the values that need to be changed in the post-processing xml files for the diagnostics.  The number of values in the arrays must match the number of values in their corresponding arrays in lines 2-13.  For example, if dates_atm_averages and dates_atm_diagnostics both have two entries, ATMDIAG_test_first_yr and ATMDIAG_test_nyrs must also have two entries.</p>
<p><strong>Line 29:</strong>  The title of your workflow or suite.</p>
<p><strong>Line 30:</strong>  The section of the suite.rc file where non task-specific information is specified.</p>
<p><strong>Line 31:</strong>  The section of the suite.rc file where environment setting are specified.</p>
<p><strong>Line 32:</strong>  Sets the email addresses that will be receive job update messages.  Multiple addresses can be specified as a comma separated list.</p>
<p><strong>Line 33:</strong>  The section of the suite.rc file where you can indicate event hooks.</p>
<p><strong>Line 34:</strong>  Indicates that you would like an email sent to the list indicating a Cylc suite has shutdown manually or after a workflow has completed.</p>
<p><strong>Line 35:</strong>  The section that describes the scheduling of tasks.</p>
<p><strong>Line 36:</strong>  The section that describes the dependencies between all of the tasks.</p>
<p><strong>Lines 37-57:</strong>  These lines describe the workflow “graph”.  Below is some of the common syntax shown in this section.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">task1</span> <span class="o">=</span>&gt; task2  <span class="c1">#means that task1 can run and after it finishes successfully, run task2.</span>

<span class="nv">task1</span> <span class="o">=</span>&gt; task2 <span class="p">&amp;</span> task3  <span class="c1">#means that task1 can run and after it finishes successfully, run task2 and task3.</span>
</pre></div>
</div>
<p><strong>Lines 59-61:</strong>  The start of the runtime section that sets what tasks to execute and how to execute them.</p>
<p><strong>Line 62:</strong>  This line is part of the Jinja2 templating.  It will loop over the dates specified in dates_atm_averages and will create the same code for each date when the suite.rc is compiled.  If this loop did not exist, you would have to specify this same information for each date specified.</p>
<p><strong>Line 63:</strong>  This line is part of the Jinja2 templating.  It specifies the unique name of the task that is being described.  You can notice the templating variables, that will create a unique task name based on the loop index.</p>
<p><strong>Line 64:</strong>  This line lists what needs to be ran.  In this several commands are listed, separated by semicolons.  The first task will cd into the case’s post-processing directory.  From there it will run the pp_config command several times to change the variables in the env_diags_atm.xml file.  Then it will run the averaging script.</p>
<p><strong>Line 65:</strong>  This next section describes job specific information</p>
<p><strong>Line 66:</strong>  This line sets the scheduler to be pbs</p>
<p><strong>Line 67:</strong>  This line sets the wallclock time to be 12 hours.</p>
<p><strong>Line 68:</strong>  This section sets the directives to use in the job’s submission script.  These can usually be found at the top of the post-processing script you would like to run.  In the case of running CESM, these can be found at the top of the .case.run script in your case directory.</p>
<p><strong>Line 69:</strong>  Sets the name of the job.</p>
<p><strong>Line 70:</strong>  Sets the name of the queue to run in.</p>
<p><strong>Line 71:</strong>  Sets the resource sizes for the job.</p>
<p><strong>Line 72:</strong>  Sets the account to submit the job under.</p>
<p><strong>Line 73:</strong>  Event hooks for this particular job.</p>
<p><strong>Lines 74-76:</strong>  Email the list when this task has started, succeeded, and/or failed.</p>
<p><strong>Lines 77:</strong>  End the for loop creating copies of this task for each date specified.</p>
<p>Several of the sections follow the same formatting.  They contain the same looping methods to create the multiple tasks for the date ranges specified and the job, directives, and event hooks sections.
The post tasks are also similar to each other and are described below.</p>
<p><strong>Lines 96-99:</strong>  These lines describe the task of copying the post-processing to a webhost.  You’ll notice this section is missing the sections found in other tasks.  This is because it is ran on the command line and does not need all of the queue submission information.  Instead, it only lists the script variable that lists the commands to run.</p>
<p>Another section that is unique is found within the case_run_{{dates_case_run[i]}} section:</p>
<p><strong>Line 107:</strong>  This line allows Cylc to resubmit your task if it fails (it receives a non-zero exit call).  In this particular case, it will try to run CESM 3 additional times and officially fail if all attempts fail.  The first re-try will wait 30 seconds before it submits again.  The other attempts will wait 2 minutes and then 10 minutes respectfully before submitting the CESM task again.  This was used as a fault-tolerance mechanism to resubmit the job again at varying times to avoid machine issues.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="mods.html"
                        title="previous chapter">How to modify a CESM Cylc workflow if you need to make changes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="faq.html"
                        title="next chapter">Common questions and answers</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="faq.html" title="Common questions and answers"
             >next</a> |</li>
        <li class="right" >
          <a href="mods.html" title="How to modify a CESM Cylc workflow if you need to make changes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CESM_WF_DOC 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Sheri Mickelson.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>