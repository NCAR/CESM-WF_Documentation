
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Common questions and answers &#8212; CESM_WF_DOC 1.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="How to create a Cylc CESM workflow from scratch" href="from_scratch.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="from_scratch.html" title="How to create a Cylc CESM workflow from scratch"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CESM_WF_DOC 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="common-questions-and-answers">
<span id="faq"></span><h1>Common questions and answers<a class="headerlink" href="#common-questions-and-answers" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="#stop-midrun"><span class="std std-ref">How do you stop a simulation once it has started?</span></a></li>
<li><a class="reference internal" href="#pause-run"><span class="std std-ref">How do you pause a run in order to evaluate it and start it back up?</span></a></li>
<li><a class="reference internal" href="#restart-when-stopped"><span class="std std-ref">How do you restart a Cylc suite if it has stopped?</span></a></li>
<li><a class="reference internal" href="#where-diags"><span class="std std-ref">Where are my diagnostics copied to?</span></a></li>
<li><a class="reference internal" href="#find-failure"><span class="std std-ref">Where do I look to find out why something failed?</span></a></li>
<li><a class="reference internal" href="#pp-failure"><span class="std std-ref">What do I do if my timeseries or xconform task fails?</span></a></li>
</ul>
<div class="section" id="how-do-you-stop-a-simulation-once-it-has-started">
<span id="stop-midrun"></span><h2>How do you stop a simulation once it has started?<a class="headerlink" href="#how-do-you-stop-a-simulation-once-it-has-started" title="Permalink to this headline">¶</a></h2>
<p>There are a couple of ways to do this depended what your end goal may be.</p>
<ul>
<li><p class="first">If you want to stop a run to start over:</p>
<blockquote>
<div><ul class="simple">
<li>With the gui open, right click on any task that is running and select the kill option.</li>
<li>Then select the “Stop suite” button at the top.</li>
<li>When you are ready to restart the simulation, click the “Run” button and select “Cold-start” to start the run up from the beginning.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">If you want to stop a run to start it again later:</p>
<blockquote>
<div><ul class="simple">
<li>With the gui open, right click on any task that is running and select the kill option.</li>
<li>Then select the “Stop suite” button at the top.</li>
<li>When you are ready to restart the simulation, click the “Run” button and select “Restart” to continue where it left off.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="how-do-you-pause-a-run-in-order-to-evaluate-it-and-start-it-back-up">
<span id="pause-run"></span><h2>How do you pause a run in order to evaluate it and start it back up?<a class="headerlink" href="#how-do-you-pause-a-run-in-order-to-evaluate-it-and-start-it-back-up" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>With the gui open, select the task you would like to pause at and select the “Hold” option.</li>
<li>When you are ready to continue the run, right click on the task and select the “Release” option.</li>
</ul>
</div>
<div class="section" id="how-do-you-restart-a-cylc-suite-if-it-has-stopped">
<span id="restart-when-stopped"></span><h2>How do you restart a Cylc suite if it has stopped?<a class="headerlink" href="#how-do-you-restart-a-cylc-suite-if-it-has-stopped" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>With the gui open, select the ‘Run’ button.</li>
<li>In the window that pops up, select the ‘restart’ option and then hit ‘Start’</li>
<li>Do not select the cold-start option in this window unless you want to start the simulation from the beginning.</li>
</ul>
</div>
<div class="section" id="where-are-my-diagnostics-copied-to">
<span id="where-diags"></span><h2>Where are my diagnostics copied to?<a class="headerlink" href="#where-are-my-diagnostics-copied-to" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Where your diagnostics are copied over to are controlled by the last set of variables in your &lt;case_dir&gt;/postprocess/env_postprocess.xml file</li>
<li>By default, the root html link is <a class="reference external" href="http://webext.cgd.ucar.edu/">http://webext.cgd.ucar.edu/</a>.  The rest of the path is controlled by the GLOBAL_REMOTE_WEBDIR variable in the env_postprocess.xml file.  Everything after “/project/diagnostics/external/” will be the remainder of the path.</li>
<li>For example, if you have &lt;entry id=”GLOBAL_REMOTE_WEBDIR” value=”/project/diagnostics/external/B1850/b.e21.B1850.f09_g17.myCMIPrun/” /&gt;, you will find your diagnostics within the directory <a class="reference external" href="http://webext.cgd.ucar.edu/B1850/b.e21.B1850.f09_g17.myCMIPrun/">http://webext.cgd.ucar.edu/B1850/b.e21.B1850.f09_g17.myCMIPrun/</a></li>
</ul>
</div>
<div class="section" id="where-do-i-look-to-find-out-why-something-failed">
<span id="find-failure"></span><h2>Where do I look to find out why something failed?<a class="headerlink" href="#where-do-i-look-to-find-out-why-something-failed" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">There are a couple of ways to find out:</p>
<blockquote>
<div><ul>
<li><p class="first">Once CESM starts running, you will need to look within the log files within your run directory</p>
</li>
<li><p class="first">If the failure was before CESM started running or the task wasn’t running the CESM model:</p>
<blockquote>
<div><ul class="simple">
<li>Open the Cylc gui and right click on the task that failed.  Then select the View menu and select the job stdout and job stderr options</li>
<li>The above will only work if you want to see the last attempt.  If you want to look at previous attempts or want to look at the job status files outside the gui, you can find these files within this path:  /glade/u/home/cmip6/cylc-run/&lt;casename&gt;.suite.cmip6/log/job/1/&lt;task name&gt;/&lt;attempt number&gt;/</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="what-do-i-do-if-my-timeseries-or-xconform-task-fails">
<span id="pp-failure"></span><h2>What do I do if my timeseries or xconform task fails?<a class="headerlink" href="#what-do-i-do-if-my-timeseries-or-xconform-task-fails" title="Permalink to this headline">¶</a></h2>
<p>This sometimes fails when the default amount of resources are too small and you’re running an experiment with more than 200 years or higher frequency data.  In this case, you will have to give these tasks more resources in the suite.rc file.</p>
<p>First, open your suite.rc file and find the section that looks like the following:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span>      <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_timeseriesL<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
      <span class="o">[[</span>timeseriesL_<span class="o">{{</span>dates_timeseriesL<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
      <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/timeseriesL
      <span class="o">[[[</span>job<span class="o">]]]</span>
              <span class="nv">method</span> <span class="o">=</span> pbs
              execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
      <span class="o">[[[</span>directives<span class="o">]]]</span>
              -N <span class="o">=</span> timeseries
              -q <span class="o">=</span> regular
              -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">16</span>:ncpus<span class="o">=</span><span class="m">9</span>:mpiprocs<span class="o">=</span><span class="m">9</span>
              -A <span class="o">=</span> ACCT00099
      <span class="o">[[[</span>event hooks<span class="o">]]]</span>
              started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
              succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
              failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
      <span class="o">{</span>% endfor %<span class="o">}</span>

      <span class="o">{</span>% <span class="k">for</span> i in range<span class="o">(</span><span class="m">0</span>,dates_xconform<span class="p">|</span>length<span class="o">)</span> %<span class="o">}</span>
      <span class="o">[[</span>xconform_<span class="o">{{</span>dates_xconform<span class="o">[</span>i<span class="o">]}}</span> <span class="o">]]</span>
      <span class="nv">script</span> <span class="o">=</span> <span class="nb">cd</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld<span class="p">;</span> /gpfs/fs1/work/cmip6/cases/DECK/helloworld/postprocess/xconform
      <span class="o">[[[</span>job<span class="o">]]]</span>
              <span class="nv">method</span> <span class="o">=</span> pbs
              execution <span class="nb">time</span> <span class="nv">limit</span> <span class="o">=</span> PT12H
      <span class="o">[[[</span>directives<span class="o">]]]</span>
              -N <span class="o">=</span> xconform
              -q <span class="o">=</span> regular
              -l <span class="o">=</span> <span class="k">select</span><span class="o">=</span><span class="m">16</span>:ncpus<span class="o">=</span><span class="m">4</span>:mpiprocs<span class="o">=</span><span class="m">4</span>
              -A <span class="o">=</span> ACCT00099
      <span class="o">[[[</span>event hooks<span class="o">]]]</span>
              started <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
              succeeded <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
              failed <span class="nv">handler</span> <span class="o">=</span> cylc email-suite
      <span class="o">{</span>% endfor %<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>The lines you will have to modify should be similar to line 10 if your timeseries task failed or line 27 if you xconform task failed.  In most cases, it should be enough to double the first number after “select=” and leave the remaining numbers the same.</p>
<p>After you have finished editing your suite.rc file, save your file and run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>cylc jobscript &lt;your casename&gt;.suite.cmip6 timeseriesL_&lt;the date on the task&gt;.1

or

cylc jobscript &lt;your casename&gt;.suite.cmip6 xconform_&lt;the date on the task&gt;.1
</pre></div>
</div>
<p>This will show you the submit script Cylc will use to submit your job to the system.  Make sure the “-l select=…..” directive shows your change.</p>
<p>Once everything looks okay, open up the gui and select the Control-&gt;Reload suite definition option.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="from_scratch.html"
                        title="previous chapter">How to create a Cylc CESM workflow from scratch</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="from_scratch.html" title="How to create a Cylc CESM workflow from scratch"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CESM_WF_DOC 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, University Coorporation for Atmoshperic Research.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>